<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>LunchIT - make order request</title>
  <meta name="description" content="make order request">
  <meta name="author" content="Jakub Gros">



<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script>
  $(document).ready(() => {
    let searchParams = new URLSearchParams(window.location.search)

    if(searchParams.has('id') == false){
      alert("invalid id");
    }
    else {
      var id = searchParams.get('id');
      console.log(id);
      $.ajax(`http://127.0.0.1:5002/order_request?id=${id}`, {
        type : 'GET',
        error : () => alert("error"),
        success : (data, status, xhr) => {

          var table = $("#all_orders_table");
          for(var meal_name in data) {
            row = $("<tr></tr>");
            row.append($("<th></th>").text(meal_name));

            for(var comment in data[meal_name]) {
              row.append($("<th></th>").text(comment));
              var quantity = data[meal_name][comment];
              row.append($("<th></th>").text(quantity));
            }
            table.append(row);
          }
        }
      });
    }

  });
</script>

<style>
    table {
        width: 100%;
    }
    table, th, td {
        border: 1px solid black;
    }

    td{
        text-align: left; 
        vertical-align: middle;
    }

    .tab_header {
      background-color: lightblue;
    }

</style>

</head>

<body>
    <table id="all_orders_table">
        <tr class="tab_header">
            <th>Food name</th>
            <th>Comment</th>
            <th>Quantity</th>
          </tr>
    </table>

</body>

</html>